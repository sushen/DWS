!function(e){var o={};function a(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=o,a.d=function(e,o,t){a.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:t})},a.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(o,"a",o),o},a.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},a.p="",a(a.s=9)}({10:function(e,o,a){jQuery(function(e){Promise.resolve().then(function(){return a(11)}).then(function(o){var a=o.WooVariationGalleryAdmin;a.GWPAdmin(),e("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){a.ImageUploader(),a.Sortable()}),e("#variable_product_options").on("woocommerce_variations_added",function(){a.ImageUploader(),a.Sortable()})})})},11:function(e,o,a){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),a.d(o,"WooVariationGalleryAdmin",function(){return n});var t=function(){function e(e,o){for(var a=0;a<o.length;a++){var t=o[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,a,t){return a&&e(o.prototype,a),t&&e(o,t),o}}();var i,n=(i=jQuery,function(){function e(){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,e)}return t(e,null,[{key:"GWPAdmin",value:function(){i().gwp_deactivate_popup&&i().gwp_deactivate_popup("woo-variation-gallery")}},{key:"ImageUploader",value:function(){i(document).off("click",".add-woo-variation-gallery-image"),i(document).on("click",".add-woo-variation-gallery-image",this.AddImage),i(document).on("click",".remove-woo-variation-gallery-image",this.RemoveImage),i(".woocommerce_variation").each(function(){var e=i(this).find(".options:first");i(this).find(".woo-variation-gallery-wrapper").insertBefore(e)})}},{key:"AddImage",value:function(o){var a=this;o.preventDefault(),o.stopPropagation();var t=void 0,n=i(this).data("product_variation_id"),r=i(this).data("product_variation_loop");if("undefined"!=typeof wp&&wp.media&&wp.media.editor){if(t)return void t.open();(t=wp.media({title:woo_variation_gallery_admin.choose_image,button:{text:woo_variation_gallery_admin.add_image},library:{type:["image"]}})).on("select",function(){var o=t.state().get("selection").toJSON().map(function(e){if("image"===e.type){var o=e.id,a=e.sizes,t=(a=void 0===a?{}:a).thumbnail,i=a.full,l=t?t.url:i.url;return wp.template("woo-variation-gallery-image")({id:o,url:l,product_variation_id:n,loop:r})}}).join("");i(a).parent().prev().find(".woo-variation-gallery-images").append(o),e.Sortable(),e.VariationChanged(a),_.delay(function(){e.ProNotice(a)},5)}),t.open()}}},{key:"VariationChanged",value:function(e){i(e).closest(".woocommerce_variation").addClass("variation-needs-update"),i("button.cancel-variation-changes, button.save-variation-changes").removeAttr("disabled"),i("#variable_product_options").trigger("woocommerce_variations_input_changed")}},{key:"ProNotice",value:function(e){i(e).closest(".woo-variation-gallery-wrapper").find(".woo-variation-gallery-images > li").length,i(e).closest(".woo-variation-gallery-wrapper").find(".woo-variation-gallery-images > li").each(function(o,a){o>=2?(i(a).remove(),i(e).closest(".woo-variation-gallery-wrapper").find(".woo-variation-gallery-pro-button").show()):i(e).closest(".woo-variation-gallery-wrapper").find(".woo-variation-gallery-pro-button").hide()})}},{key:"RemoveImage",value:function(o){var a=this;o.preventDefault(),o.stopPropagation(),e.VariationChanged(this),_.delay(function(){e.ProNotice(a),i(a).parent().remove()},1)}},{key:"Sortable",value:function(){i(".woo-variation-gallery-images").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"woo-variation-gallery-sortable-placeholder",start:function(e,o){o.item.css("background-color","#f6f6f6")},stop:function(e,o){o.item.removeAttr("style")},update:function(){e.VariationChanged(this)}})}}]),e}())},9:function(e,o,a){e.exports=a(10)}});